{% extends "base.html" %}
{% block title %}Blog - Axial Consulting{% endblock %}
{% block content %}
<!--Start breadcrumb area paroller-->
<section class="breadcrumb-area">
    <div class="breadcrumb-area-bg" style="background-image: url(https://images.unsplash.com/photo-1638342863994-ae4eee256688?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D);">
    </div>
    <div class="shape-box"></div>
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <div class="inner-content">
                    <div class="breadcrumb-menu">
                        <ul>
                            <li><a href="{% url 'consulting:home' %}">Home</a></li>
                            <li class="active">Blog</li>
                        </ul>
                    </div>
                    <div class="title" data-aos="fade-up" data-aos-easing="linear" data-aos-duration="1500">
                        <h2>Blog</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--End breadcrumb area-->

<!--Start Blog Page One-->
<section class="blog-page-one">
    <div class="container">
        <div class="row">
            <!-- Main Content Column (8 columns) -->
            <div class="col-xl-8 col-lg-7">
                <div class="row">
                    {% for post in posts %}
                    <div class="col-xl-6 col-lg-12">
                        <div class="single-blog-style1">
                            <div class="img-holder">
                                {% if post.display_image %}
                                <img src="{{ post.display_image }}" alt="{{ post.title }}">
                                {% endif %}
                                <div class="date-box">
                                    <p>{{ post.publish_date|date:'d M' }}</p>
                                </div>
                            </div>
                            <div class="text-holder">
                                <div class="meta-info">
                                    <ul>
                                        <li><span class="icon-user"></span><a href="#">by {{ post.author }}</a></li>
                                        <li><span class="icon-conversation"></span><a href="#">Comments</a></li>
                                    </ul>
                                </div>
                                <h3><a href="{% url 'consulting:blog_details' post.slug %}">{{ post.title }}</a></h3>
                                {% if post.excerpt %}
                                <p>{{ post.excerpt|truncatewords:20 }}</p>
                                {% endif %}
                                <div class="btn-box">
                                    <a href="{% url 'consulting:blog_details' post.slug %}">Read More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12">
                        <p class="text-center">No blog posts available at the moment.</p>
                    </div>
                    {% endfor %}
                </div>
                
                <!-- Pagination would go here -->
                {% if posts.has_other_pages %}
                <div class="row">
                    <div class="col-12">
                        <div class="pagination">
                            {% if posts.has_previous %}
                                <a href="?page={{ posts.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}" class="prev"><i class="fa fa-angle-left"></i></a>
                            {% endif %}
                            
                            {% for i in posts.paginator.page_range %}
                                {% if posts.number == i %}
                                    <a href="#" class="active">{{ i }}</a>
                                {% else %}
                                    <a href="?page={{ i }}{% if search_query %}&search={{ search_query }}{% endif %}">{{ i }}</a>
                                {% endif %}
                            {% endfor %}
                            
                            {% if posts.has_next %}
                                <a href="?page={{ posts.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}" class="next"><i class="fa fa-angle-right"></i></a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
            
            <!-- Sidebar Column (4 columns) -->
            <div class="col-xl-4 col-lg-5">
                <div class="thm-sidebar-box">
                    <div class="sidebar-search-box">
                        <form class="search-form" action="{% url 'consulting:blog' %}" method="get">
                            <input placeholder="Search" type="text" name="search" value="{{ search_query|default:'' }}" />
                            <button type="submit">
                                <i class="fa fa-search" aria-hidden="true"></i>
                            </button>
                        </form>
                    </div>

                    <div class="single-sidebar-box">
                        <div class="sidebar-title">
                            <h3>Recent Posts</h3>
                        </div>
                        <div class="sidebar-blog-post">
                            <ul class="blog-post">
                                {% for recent_post in recent_posts %}
                                <li>
                                    <div class="inner">
                                        <div class="img-box">
                                            {% if recent_post.display_image %}
                                            <img src="{{ recent_post.display_image }}" alt="{{ recent_post.title }}" />
                                            {% else %}
                                            <img src="https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?auto=format&fit=crop&w=400&q=80" alt="{{ recent_post.title }}" />
                                            {% endif %}
                                            <div class="overlay-content">
                                                <a href="{% url 'consulting:blog_details' recent_post.slug %}">
                                                    <i class="fa fa-link" aria-hidden="true"></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="title-box">
                                            <div class="admin">
                                                <span class="icon-user"></span> by {{ recent_post.author }}
                                            </div>
                                            <h4>
                                                <a href="{% url 'consulting:blog_details' recent_post.slug %}">
                                                    {{ recent_post.title|truncatechars:40 }}
                                                </a>
                                            </h4>
                                        </div>
                                    </div>
                                </li>
                                {% empty %}
                                <li>
                                    <div class="inner">
                                        <p>No recent posts available.</p>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>

                    <div class="single-sidebar-box">
                        <div class="sidebar-title">
                            <h3>Categories</h3>
                        </div>
                        <ul class="sidebar-categories-box">
                            {% for category in categories %}
                            <li><a href="{% url 'consulting:blog' %}?category={{ category.slug }}">{{ category.name }}</a></li>
                            {% empty %}
                            <li>No categories available.</li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--End Blog Page One-->
{% endblock %}